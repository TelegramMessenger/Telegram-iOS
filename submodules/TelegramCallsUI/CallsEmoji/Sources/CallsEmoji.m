#import <Foundation/Foundation.h>
#import <CallsEmoji/CallsEmoji.h>

static int32_t positionExtractor(uint8_t *bytes, int32_t i, int32_t count) {
    int offset = i * 8;
    int64_t num = (((int64_t)bytes[offset] & 0x7F) << 56) | (((int64_t)bytes[offset+1] & 0xFF) << 48) | (((int64_t)bytes[offset+2] & 0xFF) << 40) | (((int64_t)bytes[offset+3] & 0xFF) << 32) | (((int64_t)bytes[offset+4] & 0xFF) << 24) | (((int64_t)bytes[offset+5] & 0xFF) << 16) | (((int64_t)bytes[offset+6] & 0xFF) << 8) | (((int64_t)bytes[offset+7] & 0xFF));
    return num % count;
}

NSArray *emojisArray() {
    return @[ @"ðŸ˜‰", @"ðŸ˜", @"ðŸ˜›", @"ðŸ˜­", @"ðŸ˜±", @"ðŸ˜¡", @"ðŸ˜Ž", @"ðŸ˜´", @"ðŸ˜µ", @"ðŸ˜ˆ", @"ðŸ˜¬", @"ðŸ˜‡", @"ðŸ˜", @"ðŸ‘®", @"ðŸ‘·", @"ðŸ’‚", @"ðŸ‘¶", @"ðŸ‘¨", @"ðŸ‘©", @"ðŸ‘´", @"ðŸ‘µ", @"ðŸ˜»", @"ðŸ˜½", @"ðŸ™€", @"ðŸ‘º", @"ðŸ™ˆ", @"ðŸ™‰", @"ðŸ™Š", @"ðŸ’€", @"ðŸ‘½", @"ðŸ’©", @"ðŸ”¥", @"ðŸ’¥", @"ðŸ’¤", @"ðŸ‘‚", @"ðŸ‘€", @"ðŸ‘ƒ", @"ðŸ‘…", @"ðŸ‘„", @"ðŸ‘", @"ðŸ‘Ž", @"ðŸ‘Œ", @"ðŸ‘Š", @"âœŒï¸", @"âœ‹ï¸", @"ðŸ‘", @"ðŸ‘†", @"ðŸ‘‡", @"ðŸ‘‰", @"ðŸ‘ˆ", @"ðŸ™", @"ðŸ‘", @"ðŸ’ª", @"ðŸš¶", @"ðŸƒ", @"ðŸ’ƒ", @"ðŸ‘«", @"ðŸ‘ª", @"ðŸ‘¬", @"ðŸ‘­", @"ðŸ’…", @"ðŸŽ©", @"ðŸ‘‘", @"ðŸ‘’", @"ðŸ‘Ÿ", @"ðŸ‘ž", @"ðŸ‘ ", @"ðŸ‘•", @"ðŸ‘—", @"ðŸ‘–", @"ðŸ‘™", @"ðŸ‘œ", @"ðŸ‘“", @"ðŸŽ€", @"ðŸ’„", @"ðŸ’›", @"ðŸ’™", @"ðŸ’œ", @"ðŸ’š", @"ðŸ’", @"ðŸ’Ž", @"ðŸ¶", @"ðŸº", @"ðŸ±", @"ðŸ­", @"ðŸ¹", @"ðŸ°", @"ðŸ¸", @"ðŸ¯", @"ðŸ¨", @"ðŸ»", @"ðŸ·", @"ðŸ®", @"ðŸ—", @"ðŸ´", @"ðŸ‘", @"ðŸ˜", @"ðŸ¼", @"ðŸ§", @"ðŸ¥", @"ðŸ”", @"ðŸ", @"ðŸ¢", @"ðŸ›", @"ðŸ", @"ðŸœ", @"ðŸž", @"ðŸŒ", @"ðŸ™", @"ðŸš", @"ðŸŸ", @"ðŸ¬", @"ðŸ‹", @"ðŸ", @"ðŸŠ", @"ðŸ«", @"ðŸ€", @"ðŸŒ¹", @"ðŸŒ»", @"ðŸ", @"ðŸŒ¾", @"ðŸ„", @"ðŸŒµ", @"ðŸŒ´", @"ðŸŒ³", @"ðŸŒž", @"ðŸŒš", @"ðŸŒ™", @"ðŸŒŽ", @"ðŸŒ‹", @"âš¡ï¸", @"â˜”ï¸", @"â„ï¸", @"â›„ï¸", @"ðŸŒ€", @"ðŸŒˆ", @"ðŸŒŠ", @"ðŸŽ“", @"ðŸŽ†", @"ðŸŽƒ", @"ðŸ‘»", @"ðŸŽ…", @"ðŸŽ„", @"ðŸŽ", @"ðŸŽˆ", @"ðŸ”®", @"ðŸŽ¥", @"ðŸ“·", @"ðŸ’¿", @"ðŸ’»", @"â˜Žï¸", @"ðŸ“¡", @"ðŸ“º", @"ðŸ“»", @"ðŸ”‰", @"ðŸ””", @"â³", @"â°", @"âŒšï¸", @"ðŸ”’", @"ðŸ”‘", @"ðŸ”Ž", @"ðŸ’¡", @"ðŸ”¦", @"ðŸ”Œ", @"ðŸ”‹", @"ðŸš¿", @"ðŸš½", @"ðŸ”§", @"ðŸ”¨", @"ðŸšª", @"ðŸš¬", @"ðŸ’£", @"ðŸ”«", @"ðŸ”ª", @"ðŸ’Š", @"ðŸ’‰", @"ðŸ’°", @"ðŸ’µ", @"ðŸ’³", @"âœ‰ï¸", @"ðŸ“«", @"ðŸ“¦", @"ðŸ“…", @"ðŸ“", @"âœ‚ï¸", @"ðŸ“Œ", @"ðŸ“Ž", @"âœ’ï¸", @"âœï¸", @"ðŸ“", @"ðŸ“š", @"ðŸ”¬", @"ðŸ”­", @"ðŸŽ¨", @"ðŸŽ¬", @"ðŸŽ¤", @"ðŸŽ§", @"ðŸŽµ", @"ðŸŽ¹", @"ðŸŽ»", @"ðŸŽº", @"ðŸŽ¸", @"ðŸ‘¾", @"ðŸŽ®", @"ðŸƒ", @"ðŸŽ²", @"ðŸŽ¯", @"ðŸˆ", @"ðŸ€", @"âš½ï¸", @"âš¾ï¸", @"ðŸŽ¾", @"ðŸŽ±", @"ðŸ‰", @"ðŸŽ³", @"ðŸ", @"ðŸ‡", @"ðŸ†", @"ðŸŠ", @"ðŸ„", @"â˜•ï¸", @"ðŸ¼", @"ðŸº", @"ðŸ·", @"ðŸ´", @"ðŸ•", @"ðŸ”", @"ðŸŸ", @"ðŸ—", @"ðŸ±", @"ðŸš", @"ðŸœ", @"ðŸ¡", @"ðŸ³", @"ðŸž", @"ðŸ©", @"ðŸ¦", @"ðŸŽ‚", @"ðŸ°", @"ðŸª", @"ðŸ«", @"ðŸ­", @"ðŸ¯", @"ðŸŽ", @"ðŸ", @"ðŸŠ", @"ðŸ‹", @"ðŸ’", @"ðŸ‡", @"ðŸ‰", @"ðŸ“", @"ðŸ‘", @"ðŸŒ", @"ðŸ", @"ðŸ", @"ðŸ†", @"ðŸ…", @"ðŸŒ½", @"ðŸ¡", @"ðŸ¥", @"ðŸ¦", @"â›ªï¸", @"ðŸ°", @"â›ºï¸", @"ðŸ­", @"ðŸ—»", @"ðŸ—½", @"ðŸŽ ", @"ðŸŽ¡", @"â›²ï¸", @"ðŸŽ¢", @"ðŸš¢", @"ðŸš¤", @"âš“ï¸", @"ðŸš€", @"âœˆï¸", @"ðŸš", @"ðŸš‚", @"ðŸš‹", @"ðŸšŽ", @"ðŸšŒ", @"ðŸš™", @"ðŸš—", @"ðŸš•", @"ðŸš›", @"ðŸš¨", @"ðŸš”", @"ðŸš’", @"ðŸš‘", @"ðŸš²", @"ðŸš ", @"ðŸšœ", @"ðŸš¦", @"âš ï¸", @"ðŸš§", @"â›½ï¸", @"ðŸŽ°", @"ðŸ—¿", @"ðŸŽª", @"ðŸŽ­", @"ðŸ‡¯ðŸ‡µ", @"ðŸ‡°ðŸ‡·", @"ðŸ‡©ðŸ‡ª", @"ðŸ‡¨ðŸ‡³", @"ðŸ‡ºðŸ‡¸", @"ðŸ‡«ðŸ‡·", @"ðŸ‡ªðŸ‡¸", @"ðŸ‡®ðŸ‡¹", @"ðŸ‡·ðŸ‡º", @"ðŸ‡¬ðŸ‡§", @"1ï¸âƒ£", @"2ï¸âƒ£", @"3ï¸âƒ£", @"4ï¸âƒ£", @"5ï¸âƒ£", @"6ï¸âƒ£", @"7ï¸âƒ£", @"8ï¸âƒ£", @"9ï¸âƒ£", @"0ï¸âƒ£", @"ðŸ”Ÿ", @"â—ï¸", @"â“", @"â™¥ï¸", @"â™¦ï¸", @"ðŸ’¯", @"ðŸ”—", @"ðŸ”±", @"ðŸ”´", @"ðŸ”µ", @"ðŸ”¶", @"ðŸ”·" ];
}

NSString *randomCallsEmoji() {
    NSArray *emojis = emojisArray();
    return emojis[arc4random() % emojis.count];
}

NSString *stringForEmojiHashOfData(NSData *data, NSInteger count) {
    if (data.length != 32)
        return @"";
    
    uint8_t bytes[32];
    [data getBytes:bytes length:32];
    
    NSArray *emojis = emojisArray();
    NSString *result = @"";
    for (int32_t i = 0; i < count; i++)
    {
        int32_t position = positionExtractor(bytes, i, (int32_t)emojis.count);
        NSString *emoji = emojis[position];
        result = [result stringByAppendingString:emoji];
    }
    
    return result;
}
